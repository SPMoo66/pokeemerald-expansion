raw `
SootopolisCity_Movement_PanToActionFromPokeCenter:
	walk_slow_diag_southwest
	walk_slow_diag_southwest
	walk_slow_diag_southwest
	walk_slow_diag_southwest
	walk_slow_diag_southwest
	walk_slow_diag_southwest
	walk_slow_diag_southwest
	walk_slow_diag_southwest
	walk_slow_diag_southwest
	walk_slow_diag_southwest
	walk_slow_diag_southwest
	walk_slow_diag_southwest
	step_end

SootopolisCity_Movement_PanBackToPokeCenter:
	walk_slow_diag_northeast
	walk_slow_diag_northeast
	walk_slow_diag_northeast
	walk_slow_diag_northeast
	walk_slow_diag_northeast
	walk_slow_diag_northeast
	walk_slow_diag_northeast
	walk_slow_diag_northeast
	walk_slow_diag_northeast
	walk_slow_diag_northeast
	walk_slow_diag_northeast
	walk_slow_diag_northeast
	step_end

SootopolisCity_Movement_PanToActionFromDive:
	walk_slow_diag_northeast
	walk_slow_diag_northeast
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	step_end

SootopolisCity_Movement_PanBackToDive:
	walk_down
	walk_down
	walk_down
	walk_down
	walk_down
	walk_down
	walk_down
	walk_slow_diag_southwest
	walk_slow_diag_southwest
	step_end

SootopolisCity_Movement_KyogreAttack:
	walk_in_place_slow_left
	walk_in_place_slow_left
	walk_in_place_slow_left
	delay_16
	delay_16
	delay_16
	init_affine_anim
	walk_left_affine
	clear_affine_anim
	step_end

SootopolisCity_Movement_KyogreDefend:
	delay_16
	delay_16
	delay_16
	delay_16
	delay_16
	delay_16
	delay_16
	delay_16
	delay_16
	init_affine_anim
	walk_left_affine
	clear_affine_anim
	step_end

SootopolisCity_Movement_KyogreMoveBack:
	lock_facing_direction
	walk_right
	delay_16
	delay_16
	delay_16
	unlock_facing_direction
	step_end

SootopolisCity_Movement_KyogreIdle:
	walk_in_place_slow_left
	walk_in_place_slow_left
	walk_in_place_slow_left
	walk_in_place_slow_left
	walk_in_place_slow_left
	walk_in_place_slow_left
	step_end

SootopolisCity_Movement_GroudonAttack:
	walk_in_place_slow_right
	walk_in_place_slow_right
	walk_in_place_slow_right
	delay_16
	delay_16
	delay_16
	walk_fast_right
	step_end

SootopolisCity_Movement_GroudonDefend:
	delay_16
	delay_16
	delay_16
	delay_16
	delay_16
	delay_16
	delay_16
	delay_16
	delay_16
	walk_fast_right
	step_end

SootopolisCity_Movement_GroudonMoveBack:
	lock_facing_direction
	walk_left
	delay_16
	delay_16
	delay_16
	unlock_facing_direction
	step_end

SootopolisCity_Movement_GroudonIdle:
	walk_in_place_slow_right
	walk_in_place_slow_right
	walk_in_place_slow_right
	walk_in_place_slow_right
	walk_in_place_slow_right
	walk_in_place_slow_right
	step_end

SootopolisCity_Movement_RayquazaFlyOff:
	walk_fast_up
	walk_faster_up
	walk_faster_up
	walk_faster_up
	walk_faster_up
	walk_faster_up
	walk_faster_up
	step_end

SootopolisCity_EventScript_CaveOfOriginExpert::
	lock
	faceplayer
	goto_if_ge VAR_SOOTOPOLIS_CITY_STATE, 6, SootopolisCity_EventScript_ExpertPostLegendaries
	goto_if_eq VAR_SOOTOPOLIS_CITY_STATE, 5, SootopolisCity_EventScript_ExpertLegendaries
	goto_if_ge VAR_SOOTOPOLIS_CITY_STATE, 2, SootopolisCity_EventScript_ExpertLeadToCave
	msgbox SootopolisCity_Text_CaveOfOriginPleaseLeave, MSGBOX_DEFAULT
	release
	end

SootopolisCity_EventScript_ExpertLeadToCave::
	msgbox SootopolisCity_Text_LeadSuperiorTrainerToCave, MSGBOX_DEFAULT
	release
	end

SootopolisCity_EventScript_ExpertPostLegendaries::
	msgbox SootopolisCity_Text_CaveOfOriginSleepsToo, MSGBOX_DEFAULT
	release
	end

SootopolisCity_EventScript_ExpertLegendaries::
	msgbox SootopolisCity_Text_AwakenedPokemonClash, MSGBOX_DEFAULT
	release
	end

SootopolisCity_EventScript_Woman2::
	lockall
	applymovement LOCALID_SOOTOPOLIS_WOMAN_2, Common_Movement_FacePlayer
	waitmovement 0
	goto_if_eq VAR_SOOTOPOLIS_CITY_STATE, 5, SootopolisCity_EventScript_Woman2Rayquaza
	msgbox SootopolisCity_Text_WeatherWentWild, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_SOOTOPOLIS_WOMAN_2, Common_Movement_FaceOriginalDirection
	waitmovement 0
	releaseall
	end

SootopolisCity_EventScript_Woman2Rayquaza::
	msgbox SootopolisCity_Text_YouBroughtFlyingMon, MSGBOX_DEFAULT
	releaseall
	end

SootopolisCity_EventScript_Man::
	lock
	faceplayer
	goto_if_ge VAR_SOOTOPOLIS_CITY_STATE, 6, SootopolisCity_EventScript_ManPostLegendaries
	msgbox SootopolisCity_Text_NoOrdinaryTourist, MSGBOX_DEFAULT
	release
	end

SootopolisCity_EventScript_ManPostLegendaries::
	msgbox SootopolisCity_Text_CityRegainedCalm, MSGBOX_DEFAULT
	release
	end

SootopolisCity_EventScript_Woman1::
	lock
	faceplayer
	goto_if_ge VAR_SOOTOPOLIS_CITY_STATE, 6, SootopolisCity_EventScript_Woman1PostLegendaries
	goto_if_eq VAR_SOOTOPOLIS_CITY_STATE, 5, SootopolisCity_EventScript_Woman1Rayquaza
	goto_if_ge VAR_SOOTOPOLIS_CITY_STATE, 2, SootopolisCity_EventScript_Woman1Legendaries
	msgbox SootopolisCity_Text_SootopolisSkyBeautiful, MSGBOX_DEFAULT
	release
	end

SootopolisCity_EventScript_Woman1Legendaries::
	msgbox SootopolisCity_Text_GiganticPokemonFight, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_SOOTOPOLIS_WOMAN_1, Common_Movement_FaceOriginalDirection
	waitmovement 0
	release
	end

SootopolisCity_EventScript_Woman1PostLegendaries::
	msgbox SootopolisCity_Text_NightSkyFavoriteScenery, MSGBOX_DEFAULT
	release
	end

SootopolisCity_EventScript_Woman1Rayquaza::
	msgbox SootopolisCity_Text_FearedWorstWhenPokemonFlewDown, MSGBOX_DEFAULT
	release
	end

SootopolisCity_EventScript_NinjaBoy::
	lockall
	applymovement LOCALID_SOOTOPOLIS_NINJA_BOY, Common_Movement_FacePlayer
	waitmovement 0
	goto_if_eq VAR_SOOTOPOLIS_CITY_STATE, 5, SootopolisCity_EventScript_NinjaBoyRayquaza
	goto_if_ge VAR_SOOTOPOLIS_CITY_STATE, 6, SootopolisCity_EventScript_NinjaBoyNormal
	goto_if_le VAR_SOOTOPOLIS_CITY_STATE, 1, SootopolisCity_EventScript_NinjaBoyNormal
	msgbox SootopolisCity_Text_ThisIsWicked, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_SOOTOPOLIS_NINJA_BOY, Common_Movement_FaceOriginalDirection
	waitmovement 0
	release
	end

SootopolisCity_EventScript_NinjaBoyNormal::
	msgbox SootopolisCity_Text_WonderWhatWorldIsLike, MSGBOX_DEFAULT
	release
	end

SootopolisCity_EventScript_NinjaBoyRayquaza::
	msgbox SootopolisCity_Text_ThatWasWicked, MSGBOX_DEFAULT
	release
	end

SootopolisCity_EventScript_Boy1::
	lockall
	applymovement LOCALID_SOOTOPOLIS_BOY_1, Common_Movement_FacePlayer
	waitmovement 0
	goto_if_eq VAR_SOOTOPOLIS_CITY_STATE, 5, SootopolisCity_EventScript_Boy1Rayquaza
	goto_if_set FLAG_SYS_GAME_CLEAR, SootopolisCity_EventScript_Boy1GameClear
	goto_if_ge VAR_SOOTOPOLIS_CITY_STATE, 6, SootopolisCity_EventScript_Boy1Normal
	goto_if_le VAR_SOOTOPOLIS_CITY_STATE, 1, SootopolisCity_EventScript_Boy1Normal
	msgbox SootopolisCity_Text_GiantPokemonSuddenlyAppeared, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_SOOTOPOLIS_BOY_1, Common_Movement_FaceOriginalDirection
	waitmovement 0
	release
	end

SootopolisCity_EventScript_Boy1Rayquaza::
	msgbox SootopolisCity_Text_WhatIsThatGreenPokemon, MSGBOX_DEFAULT
	release
	end

SootopolisCity_EventScript_Boy1GameClear::
	msgbox SootopolisCity_Text_WhereDidLegendariesGo, MSGBOX_DEFAULT
	release
	end

SootopolisCity_EventScript_Boy1Normal::
	msgbox SootopolisCity_Text_PhysicallyFitLivingHere, MSGBOX_DEFAULT
	release
	end

SootopolisCity_EventScript_GymSign::
	msgbox SootopolisCity_Text_GymSign, MSGBOX_SIGN
	end

SootopolisCity_EventScript_CitySign::
	msgbox SootopolisCity_Text_CitySign, MSGBOX_SIGN
	end

EventScript_ClosedSootopolisDoor::
	msgbox SootopolisCity_Text_DoorIsClosed, MSGBOX_SIGN
	end

SootopolisCity_EventScript_Steven::
	lockall
	applymovement LOCALID_SOOTOPOLIS_STEVEN, Common_Movement_FacePlayer
	waitmovement 0
	call_if_unset FLAG_STEVEN_GUIDES_TO_CAVE_OF_ORIGIN, SootopolisCity_EventScript_StevenLeadPlayerCaveOfOrigin
	goto_if_eq VAR_SOOTOPOLIS_CITY_STATE, 2, SootopolisCity_EventScript_StevenHelpWallace
	goto_if_eq VAR_SOOTOPOLIS_CITY_STATE, 3, SootopolisCity_EventScript_StevenHelpedWallace
	goto_if_eq VAR_SOOTOPOLIS_CITY_STATE, 4, SootopolisCity_EventScript_StevenHelpedWallace
	goto_if_set FLAG_SOOTOPOLIS_ARCHIE_MAXIE_LEAVE, SootopolisCity_EventScript_StevenMaxieArchieLeft
	speakername (CommonText_Steven)
	msgbox SootopolisCity_Text_SoThatsRayquaza, MSGBOX_DEFAULT
	releaseall
	end

SootopolisCity_EventScript_StevenHelpWallace::
	speakername (CommonText_Steven)
	msgbox SootopolisCity_Text_KnowWhatsNeededToHelpHim, MSGBOX_DEFAULT
	releaseall
	end

SootopolisCity_EventScript_StevenMaxieArchieLeft::
	speakername (CommonText_Steven)
	msgbox SootopolisCity_Text_MaxieArchieLeft, MSGBOX_DEFAULT
	releaseall
	end

SootopolisCity_EventScript_StevenHelpedWallace::
	speakername (CommonText_Steven)
	msgbox SootopolisCity_Text_NeverBeenToSkyPillar, MSGBOX_DEFAULT
	releaseall
	end

SootopolisCity_EventScript_StevenLeadPlayerCaveOfOrigin::
	speakername (CommonText_Steven)
	msgbox SootopolisCity_Text_InvolvedWithCrisisComeWithMe, MSGBOX_DEFAULT
	closemessage
	call_if_eq VAR_FACING, DIR_WEST, SootopolisCity_EventScript_StartWalkToCaveOfOriginWest
	call_if_eq VAR_FACING, DIR_NORTH, SootopolisCity_EventScript_StartWalkToCaveOfOriginNorth
	speakername (CommonText_Steven)
	msgbox SootopolisCity_Text_DoesThisMakeYourFearPokemon, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_SOOTOPOLIS_STEVEN, SootopolisCity_Movement_StevenWalkToCaveOfOrigin
	applymovement LOCALID_PLAYER, SootopolisCity_Movement_PlayerWalkToCaveOfOrigin
	waitmovement 0
	delay 120
	applymovement LOCALID_SOOTOPOLIS_EXPERT, SootopolisCity_Movement_ExpertMoveAside
	waitmovement 0
	applymovement LOCALID_SOOTOPOLIS_STEVEN, SootopolisCity_Movement_StevenArriveCaveEntrance
	applymovement LOCALID_PLAYER, SootopolisCity_Movement_PlayerArriveCaveEntrance
	waitmovement 0
	speakername (CommonText_Steven)
	msgbox SootopolisCity_Text_HereWereAreHelpWallace, MSGBOX_DEFAULT
	closemessage
	setflag FLAG_STEVEN_GUIDES_TO_CAVE_OF_ORIGIN
	applymovement LOCALID_PLAYER, Common_Movement_WalkUp2
	waitmovement 0
	warp MAP_CAVE_OF_ORIGIN_ENTRANCE, 9, 19
	waitstate
	end

SootopolisCity_EventScript_StartWalkToCaveOfOriginWest::
	applymovement LOCALID_SOOTOPOLIS_STEVEN, SootopolisCity_Movement_StevenStartWalkToCaveOfOrigin
	applymovement LOCALID_PLAYER, SootopolisCity_Movement_PlayerStartWalkToCaveOfOriginWest
	waitmovement 0
	return

SootopolisCity_EventScript_StartWalkToCaveOfOriginNorth::
	applymovement LOCALID_SOOTOPOLIS_STEVEN, SootopolisCity_Movement_StevenStartWalkToCaveOfOrigin
	applymovement LOCALID_PLAYER, SootopolisCity_Movement_PlayerStartWalkToCaveOfOriginNorth
	waitmovement 0
	return

SootopolisCity_Movement_StevenStartWalkToCaveOfOrigin:
	walk_up
	walk_up
	walk_up
	walk_right
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_left
	walk_up
	walk_up
	walk_up
	walk_up
	walk_left
	walk_left
	walk_left
	walk_left
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_in_place_faster_down
	step_end

SootopolisCity_Movement_PlayerStartWalkToCaveOfOriginWest:
	walk_left
	walk_up
	walk_up
	walk_up
	walk_right
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_left
	walk_up
	walk_up
	walk_up
	walk_up
	walk_left
	walk_left
	walk_left
	walk_left
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	step_end

SootopolisCity_Movement_PlayerStartWalkToCaveOfOriginNorth:
	walk_up
	walk_up
	walk_up
	walk_up
	walk_right
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_left
	walk_up
	walk_up
	walk_up
	walk_up
	walk_left
	walk_left
	walk_left
	walk_left
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	step_end

SootopolisCity_Movement_StevenWalkToCaveOfOrigin:
	walk_up
	walk_up
	walk_right
	walk_right
	walk_right
	walk_right
	walk_down
	walk_down
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	walk_up
	walk_right
	walk_right
	walk_right
	walk_right
	walk_down
	walk_down
	walk_down
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	walk_down
	walk_down
	walk_down
	walk_down
	walk_left
	walk_left
	walk_left
	walk_left
	walk_left
	walk_left
	walk_left
	walk_left
	walk_down
	walk_down
	walk_down
	walk_down
	walk_down
	walk_down
	walk_down
	walk_down
	walk_right
	walk_right
	walk_right
	walk_right
	delay_4
	walk_in_place_faster_left
	delay_16
	delay_16
	walk_right
	walk_up
	walk_up
	step_end

SootopolisCity_Movement_PlayerWalkToCaveOfOrigin:
	walk_up
	walk_up
	walk_up
	walk_right
	walk_right
	walk_right
	walk_right
	walk_down
	walk_down
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	walk_up
	walk_right
	walk_right
	walk_right
	walk_right
	walk_down
	walk_down
	walk_down
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	walk_down
	walk_down
	walk_down
	walk_down
	walk_left
	walk_left
	walk_left
	walk_left
	walk_left
	walk_left
	walk_left
	walk_left
	walk_down
	walk_down
	walk_down
	walk_down
	walk_down
	walk_down
	walk_down
	walk_down
	walk_right
	walk_right
	walk_right
	step_end

SootopolisCity_Movement_ExpertMoveAside:
	walk_slow_left
	walk_in_place_faster_right
	step_end

SootopolisCity_Movement_StevenArriveCaveEntrance:
	walk_down
	walk_down
	walk_left
	delay_8
	walk_right
	walk_up
	walk_up
	walk_up
	walk_right
	walk_in_place_faster_left
	step_end

SootopolisCity_Movement_PlayerArriveCaveEntrance:
	delay_16
	delay_16
	delay_16
	delay_8
	walk_right
	walk_right
	walk_up
	walk_up
	walk_up
	walk_in_place_faster_right
	step_end

SootopolisCity_EventScript_Boy2::
	lockall
	applymovement LOCALID_SOOTOPOLIS_BOY_2, Common_Movement_FacePlayer
	waitmovement 0
	goto_if_eq VAR_SOOTOPOLIS_CITY_STATE, 5, SootopolisCity_EventScript_Boy2Rayquaza
	msgbox SootopolisCity_Text_TwoPokemonArentAngry, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_SOOTOPOLIS_BOY_2, Common_Movement_FaceOriginalDirection
	waitmovement 0
	releaseall
	end

SootopolisCity_EventScript_Boy2Rayquaza::
	msgbox SootopolisCity_Text_FlyingMonStoppedRampage, MSGBOX_DEFAULT
	closemessage
	releaseall
	end

SootopolisCity_EventScript_BlackBelt::
	lockall
	goto_if_eq VAR_SOOTOPOLIS_CITY_STATE, 5, SootopolisCity_EventScript_BlackBeltRayquaza
	msgbox SootopolisCity_Text_GoRedAndBlueMon, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_SOOTOPOLIS_BLACK_BELT, Common_Movement_FacePlayer
	waitmovement 0
	msgbox SootopolisCity_Text_DoYouKnowMonNames, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_SOOTOPOLIS_BLACK_BELT, Common_Movement_FaceOriginalDirection
	waitmovement 0
	releaseall
	end

SootopolisCity_EventScript_BlackBeltRayquaza::
	applymovement LOCALID_SOOTOPOLIS_BLACK_BELT, Common_Movement_FacePlayer
	waitmovement 0
	msgbox SootopolisCity_Text_GreenOneSettlesThings, MSGBOX_DEFAULT
	releaseall
	end

SootopolisCity_EventScript_Girl::
	lockall
	applymovement LOCALID_SOOTOPOLIS_GIRL, Common_Movement_FacePlayer
	waitmovement 0
	goto_if_eq VAR_SOOTOPOLIS_CITY_STATE, 5, SootopolisCity_EventScript_GirlRayquaza
	msgbox SootopolisCity_Text_SootopolisWillBeWrecked, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_SOOTOPOLIS_GIRL, Common_Movement_FaceOriginalDirection
	waitmovement 0
	releaseall
	end

SootopolisCity_EventScript_GirlRayquaza::
	msgbox SootopolisCity_Text_SootopolisDidntGetWrecked, MSGBOX_DEFAULT
	closemessage
	releaseall
	end

SootopolisCity_EventScript_Maniac::
	lockall
	applymovement LOCALID_SOOTOPOLIS_MANIAC, Common_Movement_FacePlayer
	waitmovement 0
	goto_if_eq VAR_SOOTOPOLIS_CITY_STATE, 5, SootopolisCity_EventScript_ManiacRayquaza
	msgbox SootopolisCity_Text_SeeingLegendWithOwnEyes, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_SOOTOPOLIS_MANIAC, Common_Movement_FaceOriginalDirection
	waitmovement 0
	releaseall
	end

SootopolisCity_EventScript_ManiacRayquaza::
	msgbox SootopolisCity_Text_SawLegendWithOwnEyes, MSGBOX_DEFAULT
	releaseall
	end

SootopolisCity_EventScript_Wallace::
	lock
	faceplayer
	goto_if_eq VAR_SOOTOPOLIS_CITY_STATE, 4, SootopolisCity_EventScript_GoToSkyPillar
	goto_if_set FLAG_RECEIVED_HM_WATERFALL, SootopolisCity_EventScript_GoToGym
	goto_if_set FLAG_SOOTOPOLIS_ARCHIE_MAXIE_LEAVE, SootopolisCity_EventScript_GiveWaterfall
	speakername (CommonText_Wallace)
	msgbox SootopolisCity_Text_AquaMagmaDidntMeanHarm, MSGBOX_DEFAULT
	release
	end

SootopolisCity_EventScript_GiveWaterfall::
	speakername (CommonText_Wallace)
	msgbox SootopolisCity_Text_ThankYouForHelpAcceptThis, MSGBOX_DEFAULT
	closemessage
	giveitem ITEM_HM_WATERFALL
	setflag FLAG_RECEIVED_HM_WATERFALL
	speakername (CommonText_Wallace)
	msgbox SootopolisCity_Text_ExplainWaterfallGoToGym, MSGBOX_DEFAULT
	closemessage
	call_if_eq VAR_FACING, DIR_NORTH, SootopolisCity_EventScript_WallaceMoveFromGym
	call_if_eq VAR_FACING, DIR_EAST, SootopolisCity_EventScript_WallaceMoveFromGym
	call_if_eq VAR_FACING, DIR_WEST, SootopolisCity_EventScript_WallaceMoveFromGymWest
	release
	end

SootopolisCity_EventScript_WallaceMoveFromGym::
	applymovement LOCALID_SOOTOPOLIS_WALLACE, SootopolisCity_Movement_WallaceMoveFromGym
	waitmovement 0
	copyobjectxytoperm LOCALID_SOOTOPOLIS_WALLACE
	setvar VAR_SOOTOPOLIS_WALLACE_STATE, 1
	return

SootopolisCity_EventScript_WallaceMoveFromGymWest::
	applymovement LOCALID_SOOTOPOLIS_WALLACE, SootopolisCity_Movement_WallaceMoveFromGymWest
	waitmovement 0
	copyobjectxytoperm LOCALID_SOOTOPOLIS_WALLACE
	setvar VAR_SOOTOPOLIS_WALLACE_STATE, 2
	return

SootopolisCity_EventScript_GoToSkyPillar::
	speakername (CommonText_Wallace)
	msgbox SootopolisCity_Text_HaventYouScaledSkyPillar, MSGBOX_DEFAULT
	release
	end

SootopolisCity_EventScript_GoToGym::
	speakername (CommonText_Wallace)
	msgbox SootopolisCity_Text_DazzledByMentor, MSGBOX_DEFAULT
	release
	end

SootopolisCity_Movement_WallaceMoveFromGym:
	walk_right
	walk_in_place_faster_down
	step_end

SootopolisCity_Movement_WallaceMoveFromGymWest:
	walk_left
	walk_in_place_faster_down
	step_end

SootopolisCity_EventScript_Maxie::
	lockall
	goto_if_eq VAR_SOOTOPOLIS_CITY_STATE, 5, SootopolisCity_EventScript_MaxieRayquaza
	speakername (CommonText_Maxie)
	msgbox SootopolisCity_Text_GroudonPleaseStop, MSGBOX_DEFAULT
	closemessage
	releaseall
	end

SootopolisCity_EventScript_MaxieRayquaza::
	speakername (CommonText_Maxie)
	msgbox SootopolisCity_Text_AfterAllOurScheming, MSGBOX_DEFAULT
	setflag FLAG_MET_MAXIE_SOOTOPOLIS
	goto_if_set FLAG_MET_ARCHIE_SOOTOPOLIS, SootopolisCity_EventScript_MaxieArchieLeave
	releaseall
	end

SootopolisCity_EventScript_Archie::
	lockall
	goto_if_eq VAR_SOOTOPOLIS_CITY_STATE, 5, SootopolisCity_EventScript_ArchieRayquaza
	speakername (CommonText_Archie)
	msgbox SootopolisCity_Text_KyogreCalmDown, MSGBOX_DEFAULT
	closemessage
	releaseall
	end

SootopolisCity_EventScript_ArchieRayquaza::
	speakername (CommonText_Archie)
	msgbox SootopolisCity_Text_TryingMeaninglessToPokemon, MSGBOX_DEFAULT
	setflag FLAG_MET_ARCHIE_SOOTOPOLIS
	goto_if_set FLAG_MET_MAXIE_SOOTOPOLIS, SootopolisCity_EventScript_MaxieArchieLeave
	releaseall
	end

SootopolisCity_EventScript_MaxieArchieLeave::
	setflag FLAG_HIDE_SOOTOPOLIS_CITY_MAXIE
	setflag FLAG_HIDE_SOOTOPOLIS_CITY_ARCHIE
	setflag FLAG_SOOTOPOLIS_ARCHIE_MAXIE_LEAVE
	clearflag FLAG_HIDE_MT_PYRE_SUMMIT_MAXIE
	clearflag FLAG_HIDE_MT_PYRE_SUMMIT_ARCHIE
	setvar VAR_MT_PYRE_STATE, 2
	warpsilent MAP_SOOTOPOLIS_CITY, 31, 34
	waitstate
	releaseall
	end

SootopolisCity_Text_GymSign:
	.string "Sootopolis City Pokémon Gym\n"
	.string "Leader: Juan\p"
	.string "“The Gym Leader with the beauty\n"
	.string "of pure water!”$"

SootopolisCity_Text_CitySign:
	.string "Sootopolis City\p"
	.string "“The mystical city where history\n"
	.string "slumbers.”$"

SootopolisCity_Text_DoorIsClosed:
	.string "The door is closed.$"

SootopolisCity_Text_PhysicallyFitLivingHere:
	.string "Diving in the sea. Climbing up and\n"
	.string "down stairs all the time…\p"
	.string "If you live in this town, you end up\n"
	.string "getting physically fit.$"

SootopolisCity_Text_GiantPokemonSuddenlyAppeared:
	.string "These giant Pokémon suddenly appeared\n"
	.string "in the middle of the city!\p"
	.string "And, I've never seen them before!\p"
	.string "Why are they smashing into each\n"
	.string "other like that?\p"
	.string "Why can't they be friends, those\n"
	.string "Pokémon?$"

SootopolisCity_Text_WhatIsThatGreenPokemon:
	.string "What? What? What?\n"
	.string "What is that green Pokémon?!$"

SootopolisCity_Text_WhereDidLegendariesGo:
	.string "Groudon and Kyogre…\n"
	.string "Where did they go?\p"
	.string "Will they cause droughts or downpours\n"
	.string "somewhere else?$"

SootopolisCity_Text_TwoPokemonArentAngry:
	.string "I just get this sense somehow that\n"
	.string "the two Pokémon aren't angry.\p"
	.string "I think… They probably can't control\n"
	.string "their own power…$"

SootopolisCity_Text_FlyingMonStoppedRampage:
	.string "That flying Pokémon came down from\n"
	.string "the sky and stopped the rampaging\l"
	.string "Pokémon…$"

SootopolisCity_Text_WonderWhatWorldIsLike:
	.string "I… I've never been out of this city.\p"
	.string "I wonder what the world is like on\n"
	.string "the other side of this round sky?$"

SootopolisCity_Text_ThisIsWicked:
	.string "Wow!\n"
	.string "This is wicked!$"

SootopolisCity_Text_ThatWasWicked:
	.string "Wow!\n"
	.string "That was wicked!$"

SootopolisCity_Text_GoRedAndBlueMon:
	.string "Go for it, red Pokémon!\n"
	.string "Don't back off, blue Pokémon!$"

SootopolisCity_Text_DoYouKnowMonNames:
	.string "… … … … … …\p"
	.string "Hi, do you know the names of those\n"
	.string "Pokémon fighting over there?$"

SootopolisCity_Text_GreenOneSettlesThings:
	.string "I was wondering which one would win,\n"
	.string "the red one or the blue one, but, oh no,\l"
	.string "it's the green one that settles things!\p"
	.string "Talk about a huge turn of events!$"

SootopolisCity_Text_SeeingLegendWithOwnEyes:
	.string "There's an ancient legend that claims\n"
	.string "the land and sea were shaped by\l"
	.string "a colossal battle between Pokémon.\p"
	.string "Well, I'm seeing that happen with\n"
	.string "my very own eyes!\p"
	.string "Whoa! I never expected to be\n"
	.string "witness to something this huge!$"

SootopolisCity_Text_SawLegendWithOwnEyes:
	.string "There's an ancient legend that claims\n"
	.string "the land and sea were shaped by\l"
	.string "a colossal battle between Pokémon.\p"
	.string "Well, I saw that happen with\n"
	.string "my very own eyes!\p"
	.string "Whoa! I never expected to be\n"
	.string "witness to something this huge!$"

SootopolisCity_Text_BigPokemonFighting:
	.string "A big Pokémon is fighting with\n"
	.string "another big Pokémon!\p"
	.string "Please, someone make them stop!$"

SootopolisCity_Text_PrettyMonCameFromSky:
	.string "A pretty Pokémon came down from\n"
	.string "the sky…$"

SootopolisCity_Text_SootopolisWillBeWrecked:
	.string "Oh, no!\n"
	.string "Sootopolis City will get wrecked!$"

SootopolisCity_Text_SootopolisDidntGetWrecked:
	.string "Sootopolis City didn't get wrecked!$"

SootopolisCity_Text_NoOrdinaryTourist:
	.string "Hm!\n"
	.string "You've come all the way to Sootopolis?\l"
	.string "You're no ordinary tourist.\p"
	.string "But I suppose that doesn't make you\n"
	.string "an extraordinary tourist, either.$"

SootopolisCity_Text_CityRegainedCalm:
	.string "The city has regained its calm…$"

SootopolisCity_Text_CaveOfOriginPleaseLeave:
	.string "Who might you be?\p"
	.string "This is the Cave of Origin.\p"
	.string "The spirits of Pokémon, becalmed at\n"
	.string "Mt. Pyre, are said to be revived here.\p"
	.string "Please leave.$"

SootopolisCity_Text_LeadSuperiorTrainerToCave:
	.string "A person with a strong will and\n"
	.string "superior talent…\p"
	.string "A Trainer who has knowledge and\n"
	.string "experience of many kinds of Pokémon…\p"
	.string "If such a person were to appear, I was\n"
	.string "instructed by Wallace to lead that\l"
	.string "Trainer to this Cave.$"

SootopolisCity_Text_AwakenedPokemonClash:
	.string "Oh, my…\p"
	.string "The clash between the two awakened\n"
	.string "Pokémon was quelled by the awakening\l"
	.string "of a third Pokémon…$"

SootopolisCity_Text_CaveOfOriginSleepsToo:
	.string "This is the Cave of Origin…\p"
	.string "With the passing of the crisis,\n"
	.string "the cave, too, shall sleep…$"

SootopolisCity_Text_SootopolisSkyBeautiful:
	.string "Sootopolis sprang up as a town in\n"
	.string "the crater of a volcano.\p"
	.string "If you look up at the sky, the lip of\n"
	.string "the crater is also visible.\l"
	.string "So, all you see is the sky in a circle.\p"
	.string "But that's what makes the sky above\n"
	.string "Sootopolis the most beautiful.$"

SootopolisCity_Text_GiganticPokemonFight:
	.string "When two Pokémon that gigantic\n"
	.string "are fighting that savagely, there's\l"
	.string "not much that we can do.$"

SootopolisCity_Text_FearedWorstWhenPokemonFlewDown:
	.string "When that third Pokémon flew down,\n"
	.string "I feared the worst.$"

SootopolisCity_Text_NightSkyFavoriteScenery:
	.string "A circle of a night sky framed by\n"
	.string "the crater of a volcano…\p"
	.string "And in that ring, stars flicker and\n"
	.string "blink as if they were alive…\l"
	.string "It's my favorite scenery.$"

SootopolisCity_Text_WeatherWentWild:
	.string "The weather was clear this morning,\n"
	.string "but…\p"
	.string "All of a sudden, dark clouds brewed up,\n"
	.string "rain started falling in sheets, and\l"
	.string "there was thunder and lightning, too.\p"
	.string "The weather just went completely\n"
	.string "wild!\p"
	.string "Is all of this because of those\n"
	.string "Pokémon?$"

SootopolisCity_Text_YouBroughtFlyingMon:
	.string "Oh?\p"
	.string "It was you who brought that flying\n"
	.string "Pokémon here?\p"
	.string "Well, aren't you amazing!$"

SootopolisCity_Text_GroudonPleaseStop:
	.string "G… Groudon…\n"
	.string "Please! Stop what you're doing!\p"
	.string "I know the extent of your power now!\p"
	.string "If you keep going, all Hoenn, not just\n"
	.string "Sootopolis, will be utterly ruined!$"

SootopolisCity_Text_AfterAllOurScheming:
	.string "So the super-ancient Pokémon\n"
	.string "weren't only Groudon and Kyogre…\p"
	.string "After all our fruitless scheming and\n"
	.string "frantic efforts, that one Pokémon's\l"
	.string "simple action puts everything right\l"
	.string "again as if nothing had happened…\p"
	.string "Fu…\n"
	.string "Fuhahaha…$"

SootopolisCity_Text_KyogreCalmDown:
	.string "Kyogre! What's wrong?!\n"
	.string "Look over here! It's the Red Orb!\l"
	.string "Calm down! Kyogre!\p"
	.string "… … … … … …\n"
	.string "… … … … … …\p"
	.string "It's no good!\n"
	.string "It's not responding at all!$"

SootopolisCity_Text_TryingMeaninglessToPokemon:
	.string "Kyogre and Groudon both flew\n"
	.string "off to who knows where.\p"
	.string "The weather in Hoenn has returned\n"
	.string "to its normal state…\p"
	.string "Haha…\n"
	.string "Hahaha…\p"
	.string "Maybe what we were trying to do was\n"
	.string "something small, even meaningless,\l"
	.string "to Pokémon…$"

SootopolisCity_Text_InvolvedWithCrisisComeWithMe:
	.string "Those Pokémon fighting…\n"
	.string "Groudon… And Kyogre…\p"
	.string "The two super-ancient Pokémon\n"
	.string "were awakened from a long sleep…\p"
	.string "And now they are smashing each other\n"
	.string "with their uncontrollable energy…\p"
	.string "…{PLAYER}{KUN}.\p"
	.string "You being here now I'll take to mean\n"
	.string "that you're prepared to become\l"
	.string "involved in this crisis.\p"
	.string "Well, then, there's someone that\n"
	.string "I'd like you to meet.\p"
	.string "Come with me, please.$"

SootopolisCity_Text_DoesThisMakeYourFearPokemon:
	.string "Listen, {PLAYER}{KUN}.\p"
	.string "Does seeing Groudon and Kyogre make\n"
	.string "you think Pokémon are to be feared?\p"
	.string "But that's not true.\n"
	.string "Pokémon are really more…\p"
	.string "…Why am I asking you this?\n"
	.string "You already know.$"

SootopolisCity_Text_HereWereAreHelpWallace:
	.string "Okay, here we are!\p"
	.string "Inside here you'll find someone named\n"
	.string "Wallace.\p"
	.string "I think you have what's needed to\n"
	.string "help him…$"

SootopolisCity_Text_KnowWhatsNeededToHelpHim:
	.string "I think you have what's needed to\n"
	.string "help him…$"

SootopolisCity_Text_NeverBeenToSkyPillar:
	.string "The Sky Pillar…\p"
	.string "I've never been there.\n"
	.string "I wonder where it could be?$"

SootopolisCity_Text_SoThatsRayquaza:
	.string "So that's Rayquaza…\p"
	.string "It's incredible how the two rampaging\n"
	.string "Pokémon would flee from it in fear…$"

SootopolisCity_Text_MaxieArchieLeft:
	.string "It looks like both Maxie and Archie\n"
	.string "have gone away somewhere.\p"
	.string "Perhaps they've gone to Mt. Pyre to\n"
	.string "return those Orbs…$"

SootopolisCity_Text_HaventYouScaledSkyPillar:
	.string "Oh?\n"
	.string "{PLAYER}{KUN}?\p"
	.string "Haven't you scaled the Sky Pillar\n"
	.string "yet?\p"
	.string "I'm sure that you can make it to\n"
	.string "the top of the Sky Pillar…$"

SootopolisCity_Text_AquaMagmaDidntMeanHarm:
	.string "{PLAYER}{KUN}…\p"
	.string "The leaders of Team Magma and Aqua,\n"
	.string "I don't think they meant harm.\p"
	.string "It wouldn't hurt to hear what they\n"
	.string "have to say for themselves.$"

SootopolisCity_Text_ThankYouForHelpAcceptThis:
	.string "{PLAYER}{KUN}…\n"
	.string "My eyes didn't deceive me.\p"
	.string "Thanks to your help, Sootopolis…\n"
	.string "No, all of Hoenn was saved.\p"
	.string "On behalf of the people, I thank you.\p"
	.string "This is a gift from me.\n"
	.string "Please accept it.$"

SootopolisCity_Text_ExplainWaterfallGoToGym:
	.string "That Hidden Machine contains\n"
	.string "Waterfall.\p"
	.string "If you have the Rain Badge, a Pokémon\n"
	.string "that has learned that HM move can\l"
	.string "force its way up waterfalls.\p"
	.string "And where does one get the Rain Badge?\n"
	.string "You know, don't you?\p"
	.string "That's right! You have to beat\n"
	.string "the Sootopolis Gym Leader.\p"
	.string "When you're all set to go, step through\n"
	.string "that door.$"

SootopolisCity_Text_DazzledByMentor:
	.string "I'm sure that you will be dazzled\n"
	.string "by my mentor's breathtakingly\l"
	.string "elegant battle style.$"
`

const LOCALID_SOOTOPOLIS_EXPERT = 1
const LOCALID_SOOTOPOLIS_WOMAN_2 = 2
const LOCALID_KIRI = 3
const LOCALID_SOOTOPOLIS_NINJA_BOY = 4
const LOCALID_SOOTOPOLIS_BOY_1 = 5
const LOCALID_SOOTOPOLIS_STEVEN = 7
const LOCALID_SOOTOPOLIS_WOMAN_1 = 8
const LOCALID_SOOTOPOLIS_GROUDON = 9
const LOCALID_SOOTOPOLIS_KYOGRE = 10
const LOCALID_SOOTOPOLIS_RAYQUAZA = 11
const LOCALID_SOOTOPOLIS_MANIAC = 12
const LOCALID_SOOTOPOLIS_GIRL = 13
const LOCALID_SOOTOPOLIS_BLACK_BELT = 14
const LOCALID_SOOTOPOLIS_BOY_2 = 15
const LOCALID_SOOTOPOLIS_MAXIE = 16
const LOCALID_SOOTOPOLIS_ARCHIE = 17
const LOCALID_SOOTOPOLIS_WALLACE = 18

mapscripts SootopolisCity_MapScripts {
	MAP_SCRIPT_ON_LOAD {
		if (!flag(FLAG_SOOTOPOLIS_ARCHIE_MAXIE_LEAVE)) {
			setmetatile (31, 32, METATILE_Sootopolis_GymDoor_Closed, TRUE)
		}
		if (!flag(FLAG_KYOGRE_ESCAPED_SEAFLOOR_CAVERN)) {}
		elif (!flag(FLAG_SOOTOPOLIS_ARCHIE_MAXIE_LEAVE)) {
				setmetatile (9, 6, METATILE_Sootopolis_Door_Closed, TRUE)
				setmetatile (9, 17, METATILE_Sootopolis_Door_Closed, TRUE)
				setmetatile (9, 26, METATILE_Sootopolis_Door_Closed, TRUE)
				setmetatile (44, 17, METATILE_Sootopolis_Door_Closed, TRUE)
				setmetatile (8, 35, METATILE_Sootopolis_Door_Closed, TRUE)
				setmetatile (53, 28, METATILE_Sootopolis_Door_Closed, TRUE)
				setmetatile (45, 6, METATILE_Sootopolis_Door_Closed, TRUE)
				setmetatile (48, 25, METATILE_Sootopolis_Door_Closed, TRUE)
				setmetatile (51, 36, METATILE_Sootopolis_Door_Closed, TRUE)
		}
	}
	MAP_SCRIPT_ON_TRANSITION {
		setflag (FLAG_VISITED_SOOTOPOLIS_CITY)
		setflag (FLAG_TEMP_2)
		if (var(VAR_EMERALBODY_RIVAL_STATE) == 14) {
			call (EventScript_Clear_FlagTemp2) # Show Rivals
		}
		if (var(VAR_SOOTOPOLIS_CITY_STATE) == 1 || var(VAR_SKY_PILLAR_STATE) == 1) {
			call (EventScript_HideMapNamePopup)
		}
		if (var(VAR_SOOTOPOLIS_CITY_STATE) == 0 || var(VAR_SOOTOPOLIS_CITY_STATE) == 6) {}
		elif (var(VAR_SOOTOPOLIS_CITY_STATE) == 1 || var(VAR_SKY_PILLAR_STATE) == 1) {
			setweather (WEATHER_DOWNPOUR)
		}
		elif (var(VAR_SKY_PILLAR_STATE) <= 1) {
			call (Common_EventScript_SetAbnormalWeather)
		}
		if (var(VAR_SOOTOPOLIS_CITY_STATE) == 0 || var(VAR_SOOTOPOLIS_CITY_STATE) == 6) {}
		elif (var(VAR_SOOTOPOLIS_CITY_STATE) == 1 || var(VAR_SOOTOPOLIS_CITY_STATE) == 2 || var(VAR_SOOTOPOLIS_CITY_STATE) == 3 || var(VAR_SOOTOPOLIS_CITY_STATE) == 4 || var(VAR_SKY_PILLAR_STATE) <= 1) {
			setmaplayoutindex (LAYOUT_SOOTOPOLIS_CITY_LEGENDS_BATTLE)
		}
		if (var(VAR_SOOTOPOLIS_CITY_STATE) == 1 || var(VAR_SOOTOPOLIS_CITY_STATE) == 2 || var(VAR_SOOTOPOLIS_CITY_STATE) == 3 || var(VAR_SOOTOPOLIS_CITY_STATE) == 4 || var(VAR_SOOTOPOLIS_CITY_STATE) == 5) {
			setobjectxyperm (LOCALID_KIRI, 13, 48)
			setobjectxyperm (LOCALID_SOOTOPOLIS_BOY_1, 46, 32)
			setobjectxyperm (LOCALID_SOOTOPOLIS_NINJA_BOY, 48, 41)
			setobjectxyperm (LOCALID_SOOTOPOLIS_WOMAN_1, 45, 43)
			setobjectmovementtype (LOCALID_KIRI, MOVEMENT_TYPE_FACE_UP)
			setobjectmovementtype (LOCALID_SOOTOPOLIS_BOY_1, MOVEMENT_TYPE_FACE_LEFT)
			setobjectmovementtype (LOCALID_SOOTOPOLIS_NINJA_BOY, MOVEMENT_TYPE_FACE_LEFT)
			setobjectmovementtype (LOCALID_SOOTOPOLIS_WOMAN_1, MOVEMENT_TYPE_FACE_LEFT)
		}
		if (var(VAR_SOOTOPOLIS_CITY_STATE) == 2 || var(VAR_SOOTOPOLIS_CITY_STATE) == 3) {
			if (flag(FLAG_STEVEN_GUIDES_TO_CAVE_OF_ORIGIN)) {
				setobjectxyperm (LOCALID_SOOTOPOLIS_EXPERT, 30, 18)
				setobjectxyperm (LOCALID_SOOTOPOLIS_STEVEN, 32, 18)
			}
		}
		if (var(VAR_SOOTOPOLIS_CITY_STATE) == 4) {
			setobjectxyperm (LOCALID_SOOTOPOLIS_EXPERT, 30, 18)
			setobjectxyperm (LOCALID_SOOTOPOLIS_WALLACE, 31, 18)
			setobjectxyperm (LOCALID_SOOTOPOLIS_STEVEN, 32, 18)
		}
		if (var(VAR_SOOTOPOLIS_CITY_STATE) == 5) {
			setobjectxyperm (LOCALID_SOOTOPOLIS_EXPERT, 31, 18)
			setobjectxyperm (LOCALID_SOOTOPOLIS_STEVEN, 29, 33)
			setobjectxyperm (LOCALID_SOOTOPOLIS_MAXIE, 33, 35)
			setobjectxyperm (LOCALID_SOOTOPOLIS_ARCHIE, 34, 35)
			switch (var(VAR_SOOTOPOLIS_WALLACE_STATE)) {
				case 0:
					setobjectxyperm (LOCALID_SOOTOPOLIS_WALLACE, 31, 33)
					setobjectmovementtype (LOCALID_SOOTOPOLIS_WALLACE, MOVEMENT_TYPE_FACE_DOWN)
				case 1:
					setobjectxyperm (LOCALID_SOOTOPOLIS_WALLACE, 32, 33)
					setobjectmovementtype (LOCALID_SOOTOPOLIS_WALLACE, MOVEMENT_TYPE_FACE_DOWN)
				case 2:
					setobjectxyperm (LOCALID_SOOTOPOLIS_WALLACE, 30, 33)
					setobjectmovementtype (LOCALID_SOOTOPOLIS_WALLACE, MOVEMENT_TYPE_FACE_DOWN)
				default:
			}
		}
		if (var(VAR_SOOTOPOLIS_CITY_STATE) == 6) {
			setobjectxyperm (LOCALID_SOOTOPOLIS_EXPERT, 31, 18)
		}
	}
	MAP_SCRIPT_ON_RESUME {
		setdivewarp (MAP_UNDERWATER_SOOTOPOLIS_CITY, 9, 6)
		if (var(VAR_SOOTOPOLIS_CITY_STATE) == 5 || var(VAR_SKY_PILLAR_STATE) <= 1) {
			setmaplayoutindex (LAYOUT_SOOTOPOLIS_CITY_LEGENDS_BATTLE)
		}
	}
	MAP_SCRIPT_ON_FRAME_TABLE [
		VAR_SOOTOPOLIS_CITY_STATE, 1: SootopolisCity_EventScript_StartLegendariesScene
		VAR_SKY_PILLAR_STATE, 1: SootopolisCity_EventScript_StartRayquazaScene
		VAR_LOOKER_ROCKET, 8: SootopolisCity_EventScript_Looker
	]
	MAP_SCRIPT_ON_WARP_INTO_MAP_TABLE [
		VAR_SOOTOPOLIS_CITY_STATE, 5: SootopolisCity_EventScript_PlayerFaceLegendaries
	]
}

// If not at PokeCenter, assumed to have arrived via Dive
script SootopolisCity_EventScript_StartLegendariesScene {
	lockall
	special (StorePlayerCoordsInVars)
	if (var(VAR_0x8004) != 43 || var(VAR_0x8005) != 32) {
		setflag (FLAG_TEMP_1)
	}
	delay (60)
	special (SpawnCameraObject)
	if (flag(FLAG_TEMP_1)) {
		applymovement (LOCALID_CAMERA, SootopolisCity_Movement_PanToActionFromDive)
	}
	else {
		applymovement (LOCALID_CAMERA, SootopolisCity_Movement_PanToActionFromPokeCenter)
	}
	waitmovement (0)
	special (RemoveCameraObject)
	delay (60)
	fadescreenspeed (FADE_TO_BLACK, 8)
	call (WeatherScript_SetAndDo_Abnormal)
	setvar (VAR_0x8004, FALSE) // Just do Groudon/Kyogre fight scene
	special (Script_DoRayquazaScene)
	waitstate
	applymovement (LOCALID_SOOTOPOLIS_KYOGRE, Common_Movement_WalkInPlaceFasterLeft)
	applymovement (LOCALID_SOOTOPOLIS_GROUDON, Common_Movement_WalkInPlaceFasterRight)
	waitmovement (0)
	delay (60)
	waitse
	playmoncry (SPECIES_KYOGRE, CRY_MODE_ENCOUNTER)
	applymovement (LOCALID_SOOTOPOLIS_KYOGRE, SootopolisCity_Movement_KyogreAttack)
	applymovement (LOCALID_SOOTOPOLIS_GROUDON, SootopolisCity_Movement_GroudonDefend)
	waitmovement (0)
	setvar (VAR_0x8004, 1)  // vertical pan
	setvar (VAR_0x8005, 1)  // horizontal pan
	setvar (VAR_0x8006, 8)  // num shakes
	setvar (VAR_0x8007, 5)  // shake delay
	special (ShakeCamera)
	waitstate
	applymovement (LOCALID_SOOTOPOLIS_KYOGRE, SootopolisCity_Movement_KyogreMoveBack)
	applymovement (LOCALID_SOOTOPOLIS_GROUDON, SootopolisCity_Movement_GroudonMoveBack)
	waitmovement (0)
	waitse
	playmoncry (SPECIES_GROUDON, CRY_MODE_ENCOUNTER)
	applymovement (LOCALID_SOOTOPOLIS_KYOGRE, SootopolisCity_Movement_KyogreDefend)
	applymovement (LOCALID_SOOTOPOLIS_GROUDON, SootopolisCity_Movement_GroudonAttack)
	waitmovement (0)
	setvar (VAR_0x8004, 1)  // vertical pan
	setvar (VAR_0x8005, 1)  // horizontal pan
	setvar (VAR_0x8006, 8)  // num shakes
	setvar (VAR_0x8007, 5)  // shake delay
	special (ShakeCamera)
	waitstate
	applymovement (LOCALID_SOOTOPOLIS_KYOGRE, SootopolisCity_Movement_KyogreMoveBack)
	applymovement (LOCALID_SOOTOPOLIS_GROUDON, SootopolisCity_Movement_GroudonMoveBack)
	waitmovement (0)
	waitse
	playmoncry (SPECIES_KYOGRE, CRY_MODE_ENCOUNTER)
	applymovement (LOCALID_SOOTOPOLIS_KYOGRE, SootopolisCity_Movement_KyogreAttack)
	applymovement (LOCALID_SOOTOPOLIS_GROUDON, SootopolisCity_Movement_GroudonDefend)
	waitmovement (0)
	setvar (VAR_0x8004, 1)  // vertical pan
	setvar (VAR_0x8005, 1)  // horizontal pan
	setvar (VAR_0x8006, 8)  // num shakes
	setvar (VAR_0x8007, 5)  // shake delay
	special (ShakeCamera)
	waitstate
	applymovement (LOCALID_SOOTOPOLIS_KYOGRE, SootopolisCity_Movement_KyogreMoveBack)
	applymovement (LOCALID_SOOTOPOLIS_GROUDON, SootopolisCity_Movement_GroudonMoveBack)
	waitmovement (0)
	special (SpawnCameraObject)
	applymovement (LOCALID_SOOTOPOLIS_KYOGRE, SootopolisCity_Movement_KyogreIdle)
	applymovement (LOCALID_SOOTOPOLIS_GROUDON, SootopolisCity_Movement_GroudonIdle)
	if (flag(FLAG_TEMP_1)) {
		applymovement (LOCALID_CAMERA, SootopolisCity_Movement_PanBackToDive)
	}
	else {
		applymovement (LOCALID_CAMERA, SootopolisCity_Movement_PanBackToPokeCenter)
	}
	waitmovement (0)
	special (RemoveCameraObject)
	setvar (VAR_SOOTOPOLIS_CITY_STATE, 2)
	clearflag (FLAG_HIDE_MAP_NAME_POPUP)
	releaseall
}

script SootopolisCity_EventScript_StartRayquazaScene {
	lockall
	special (StorePlayerCoordsInVars)
	if (var(VAR_0x8004) != 43 || var(VAR_0x8005) != 32) {
		setflag (FLAG_TEMP_1)
	}
	delay (60)
	special (SpawnCameraObject)
	if (flag(FLAG_TEMP_1)) {
		applymovement (LOCALID_CAMERA, SootopolisCity_Movement_PanToActionFromDive)
	}
	else {
		applymovement (LOCALID_CAMERA, SootopolisCity_Movement_PanToActionFromPokeCenter)
	}
	waitmovement (0)
	delay (20)
	fadescreenspeed (FADE_TO_BLACK, 8)
	applymovement (LOCALID_CAMERA, Common_Movement_WalkUp2)
	waitmovement (0)
	special (RemoveCameraObject)
	addobject (LOCALID_SOOTOPOLIS_RAYQUAZA)
	hideobjectat (LOCALID_SOOTOPOLIS_RAYQUAZA, MAP_SOOTOPOLIS_CITY)
	setvar (VAR_0x8004, TRUE)
	special (Script_DoRayquazaScene)
	waitstate
	delay (80)
	msgbox ("But Rayquaza alone cannot quell them!")
	closemessage
	special (SavePlayerParty)
	fadescreen (FADE_TO_BLACK)
	special (ChooseHalfPartyForBattle)
	waitstate
	setflag (FLAG_WILD_PARTNER)
	setflag (FLAG_NO_CATCHING)
	setflag (FLAG_NO_RUNNING)
	setwildbattle (SPECIES_GROUDON, 55, ITEM_RED_ORB, 0, SPECIES_KYOGRE, 55, ITEM_BLUE_ORB, 0, MOVE_BULK_UP, MOVE_HAMMER_ARM, MOVE_LAVA_PLUME, MOVE_PRECIPICE_BLADES, MOVE_CALM_MIND, MOVE_BODY_SLAM, MOVE_ICE_BEAM, MOVE_ORIGIN_PULSE)
	multi_wild (PARTNER_RAYQUAZA)
	clearflag (FLAG_WILD_PARTNER)
	if (var(VAR_RESULT) != 1) {
		fadescreen (FADE_TO_BLACK)
		special (SetCB2WhiteOut)
		waitstate
	}
	else {
		fadescreenspeed (FADE_TO_BLACK, 2)
		clearflag (FLAG_NO_CATCHING)
		clearflag (FLAG_NO_RUNNING)
		removeobject (LOCALID_SOOTOPOLIS_GROUDON)
		removeobject (LOCALID_SOOTOPOLIS_KYOGRE)
		setmetatile (27, 43, METATILE_Sootopolis_RoughWater, FALSE)
		setmetatile (28, 43, METATILE_Sootopolis_RoughWater, FALSE)
		setmetatile (29, 43, METATILE_Sootopolis_RoughWater, FALSE)
		setmetatile (30, 43, METATILE_Sootopolis_RoughWater, FALSE)
		setmetatile (27, 44, METATILE_Sootopolis_RoughWater, FALSE)
		setmetatile (28, 44, METATILE_Sootopolis_RoughWater, FALSE)
		setmetatile (29, 44, METATILE_Sootopolis_RoughWater, FALSE)
		setmetatile (30, 44, METATILE_Sootopolis_RoughWater, FALSE)
		setmetatile (27, 45, METATILE_Sootopolis_RoughWater, FALSE)
		setmetatile (28, 45, METATILE_Sootopolis_RoughWater, FALSE)
		setmetatile (29, 45, METATILE_Sootopolis_RoughWater, FALSE)
		setmetatile (30, 45, METATILE_Sootopolis_RoughWater, FALSE)
		setmetatile (32, 43, METATILE_Sootopolis_RoughWater, FALSE)
		setmetatile (33, 43, METATILE_Sootopolis_RoughWater, FALSE)
		setmetatile (34, 43, METATILE_Sootopolis_RoughWater, FALSE)
		setmetatile (35, 43, METATILE_Sootopolis_RoughWater, FALSE)
		setmetatile (32, 44, METATILE_Sootopolis_RoughWater, FALSE)
		setmetatile (33, 44, METATILE_Sootopolis_RoughWater, FALSE)
		setmetatile (34, 44, METATILE_Sootopolis_RoughWater, FALSE)
		setmetatile (35, 44, METATILE_Sootopolis_RoughWater, FALSE)
		setmetatile (32, 45, METATILE_Sootopolis_RoughWater, FALSE)
		setmetatile (33, 45, METATILE_Sootopolis_RoughWater, FALSE)
		setmetatile (34, 45, METATILE_Sootopolis_RoughWater, FALSE)
		setmetatile (35, 45, METATILE_Sootopolis_RoughWater, FALSE)
		special (DrawWholeMapView)
		fadescreenspeed (FADE_FROM_BLACK, 2)
		playse (SE_THUNDER)
		special (SpawnCameraObject)
		applymovement (LOCALID_CAMERA, Common_Movement_WalkUp2)
		if (flag(FLAG_TEMP_1)) {
			applymovement (LOCALID_PLAYER, Common_Movement_WalkUp4)
		}
		waitmovement (0)
		waitse
		playmoncry (SPECIES_RAYQUAZA, CRY_MODE_ENCOUNTER)
		setvar (VAR_0x8004, 1)  // vertical pan
		setvar (VAR_0x8005, 1)  // horizontal pan
		setvar (VAR_0x8006, 8)  // num shakes
		setvar (VAR_0x8007, 3)  // shake delay
		special (ShakeCamera)
		waitstate
		waitse
		playmoncry (SPECIES_RAYQUAZA, CRY_MODE_ENCOUNTER)
		setvar (VAR_0x8004, 1)  // vertical pan
		setvar (VAR_0x8005, 2)  // horizontal pan
		setvar (VAR_0x8006, 8)  // num shakes
		setvar (VAR_0x8007, 5)  // shake delay
		special (ShakeCamera)
		waitstate
		waitmoncry
		call (WeatherScript_SetAndDo_None)
		applymovement (LOCALID_SOOTOPOLIS_RAYQUAZA, SootopolisCity_Movement_RayquazaFlyOff)
		waitmovement (0)
		removeobject (LOCALID_SOOTOPOLIS_RAYQUAZA)
		special (WaitWeather)
		waitstate
		clearflag (FLAG_SYS_WEATHER_CTRL)
		setvar (VAR_SKY_PILLAR_STATE, 2)
		clearflag (FLAG_LEGENDARIES_IN_SOOTOPOLIS)
		if (flag(FLAG_TEMP_1)) {
			fadenewbgm (MUS_SURF)
		}
		else {
			fadenewbgm (MUS_SOOTOPOLIS)
		}
		delay (120)
		clearflag (FLAG_HIDE_MAP_NAME_POPUP)
		if (flag(FLAG_TEMP_1)) {
			warpwhitefade (MAP_SOOTOPOLIS_CITY, 29, 53)
		}
		else {
			warpwhitefade (MAP_SOOTOPOLIS_CITY, 43, 32)
		}
		waitstate
	}
}

script SootopolisCity_EventScript_PlayerFaceLegendaries {
	special (StorePlayerCoordsInVars)
	if (var(VAR_0x8004) != 43 || var(VAR_0x8005) != 32) {
		turnobject (LOCALID_PLAYER, DIR_NORTH)
		if (var(VAR_SKY_PILLAR_STATE) == 2) {
			setvar (VAR_SKY_PILLAR_STATE, 3)
		}
	}
}

script SootopolisCity_EventScript_Kiri {
	lock
	faceplayer
	if (var(VAR_SOOTOPOLIS_CITY_STATE) <= 1 || var(VAR_SOOTOPOLIS_CITY_STATE) >= 6) {
		checkitem (ITEM_WISH_TAG)
		if (var(VAR_SOOTOPOLIS_CITY_STATE) >= 6 && var(VAR_RESULT) == FALSE) {
			msgbox(	"{PLAYER}!\nYou stopped the big Pokémon from\lfighting!\pKiri is happy…\p"
					"Since you helped Kiri's wishes come\ntrue, Kiri will give you this!")
			giveitem (ITEM_WISH_TAG)
			msgbox(	"Kiri hopes that you can use her Wish\nTag to make your own wish come true.")
		}
		else {
			dotimebasedevents
			special (GetPlayerBigGuyGirlString)
			if (flag(FLAG_DAILY_SOOTOPOLIS_RECEIVED_BERRY)) {
				msgbox (SootopolisCity_Text_LikeSeasonBornIn, MSGBOX_YESNO)
				if (var(VAR_RESULT) == YES) {
					msgbox (SootopolisCity_Text_ThenILoveAutumn, MSGBOX_DEFAULT)
				}
				else {
					msgbox (SootopolisCity_Text_OhDoesntMatter, MSGBOX_DEFAULT)
				}
			}
			else {
				msgbox (SootopolisCity_Text_NameIsKiriHaveOneOfThese, MSGBOX_DEFAULT)
				random (NUM_KIRI_BERRIES)
				addvar (VAR_RESULT, NUM_KIRI_BERRIES_SKIPPED)
				addvar (VAR_RESULT, FIRST_BERRY_INDEX)
				giveitem (VAR_RESULT)
				if (var(VAR_RESULT) == FALSE) {
					goto (Common_EventScript_ShowBagIsFull)
				}
				else {
					setflag (FLAG_DAILY_SOOTOPOLIS_RECEIVED_BERRY)
					msgbox (SootopolisCity_Text_GiveYouThisBerryToo, MSGBOX_DEFAULT)
					random (2)
					if (var(VAR_RESULT) == 0) {
						giveitem (ITEM_FIGY_BERRY)
						if (var(VAR_RESULT) == FALSE) {
							goto (Common_EventScript_ShowBagIsFull)
						}
					}
					elif (var(VAR_RESULT) == 1) {
						giveitem (ITEM_IAPAPA_BERRY)
						if (var(VAR_RESULT) == FALSE) {
							goto (Common_EventScript_ShowBagIsFull)
						}
					}
					msgbox (SootopolisCity_Text_WhatKindOfWishInYourName, MSGBOX_DEFAULT)
				}
			}
		}
	}
	elif (var(VAR_SOOTOPOLIS_CITY_STATE) == 5) {
		msgbox (SootopolisCity_Text_PrettyMonCameFromSky, MSGBOX_DEFAULT)
		closemessage
	}
	else {
		msgbox (SootopolisCity_Text_BigPokemonFighting, MSGBOX_DEFAULT)
		closemessage
		applymovement (LOCALID_KIRI, Common_Movement_FaceOriginalDirection)
		waitmovement (0)
	}
	release
}